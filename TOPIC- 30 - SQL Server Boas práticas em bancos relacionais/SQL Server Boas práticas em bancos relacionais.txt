* SQL é escondido pelos frameworks

CREATE TABLE PRODUTOS (
	CODIGO INT NOT NULL,
	DESCRICAO VARCHAR(50) NOT NULL,
	DATA_VALIDADE DATETIME,
	EAN VARCHAR(15) NOT NULL,
	IND_INATIVO INT NOT NULL DEFAULT 0
)

ALTER TABLE PRODUTOS ADD CONSTRAINT PK_PRODUTOS PRIMARY KEY (CODIGO);

CREATE INDEX IDX_PRODUTOS_EAN ON PRODUTOS(EAN);

INSERT INTO PRODUTOS VALUES (1, 'Nome Produto', GETDATE(), '12365986547', 0);
INSERT INTO PRODUTOS (CODIGO, DESCRICAO, EAN) VALUES (2, 'Nome Produto', '12365986547');

SELECT * FROM PRODUTOS WHERE DESCRICAO LIKE '%Produto'; // traz onde tiver produto no final
SELECT * FROM PRODUTOS WHERE DESCRICAO LIKE 'Produto%'; // traz onde tiver produto no começo
SELECT * FROM PRODUTOS WHERE DESCRICAO LIKE '%Produto%'; // traz onde tiver produto em qualquer parte
SELECT COUNT(*) AS TOTAL FROM PRODUTOS;

CREATE TABLE LOJAS(
	CODIGO INT NOT NULL,
	NOME VARCHAR(50) NOT NULL,
	IND_INATIVO INT NOT NULL DEFAULT 0,
	CONSTRAINT LOJA_PK PRIMARY KEY (CODIGO)
);

INSERT INTO LOJAS (CODIGO, NOME) VALUES (1000, 'Filial São Paulo');
INSERT INTO LOJAS (CODIGO, NOME) VALUES (2000, 'Filial Recife');
INSERT INTO LOJAS (CODIGO, NOME) VALUES (3000, 'Filial Rio de Janeiro');

CREATE TABLE ESTOQUE (
	CODIGO_PRODUTO INT NOT NULL,
	CODIGO_FILIAL INT NOT NULL,
	QUANTIDADE DECIMAL NOT NULL DEFAULT 0,
	CONSTRAINT ESTOQUE_PK PRIMARY KEY (CODIGO_PRODUTO, CODIGO_FILIAL)
);

ALTER TABLE ESTOQUE ADD CONSTRAINT FK_ESTOQUE_PRODUTOS FOREIGN KEY (CODIGO_PRODUTO) REFERENCES PRODUTOS(CODIGO);
ALTER TABLE ESTOQUE ADD CONSTRAINT FK_ESTOQUE_LOJAS FOREIGN KEY (CODIGO_FILIAL) REFERENCES LOJAS(CODIGO);

ALTER TABLE ESTOQUE DROP CONSTRAINT FK_ESTOQUE_LOJAS;


INSERT INTO LOJAS (CODIGO, NOME) VALUES (1000, 'Filial São Paulo');
INSERT INTO LOJAS (CODIGO, NOME) VALUES (2000, 'Filial Recife');
INSERT INTO LOJAS (CODIGO, NOME) VALUES (3000, 'Filial Rio de Janeiro');
